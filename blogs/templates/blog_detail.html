{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg border-0">
        <div class="card-body p-5">
            <!-- Blog Title -->
            <h1 class="card-title display-4 text-center font-weight-bold mb-4">{{ blog.title }}</h1>
            
            <!-- Blog Meta Info -->
            <p class="text-center text-muted mb-4">
                Published on 
                <span class="fw-bold">{{ blog.publish_date|date:"F j, Y, g:i a" }}</span> | 
                <span class="badge bg-primary fs-6">{{ blog.category }}</span>
            </p>
            
            <hr class="my-4">
            
            <!-- Blog Content -->
            <p class="card-text fs-5 lh-lg">{{ blog.content }}</p>
            
            <div class="mt-5 d-flex justify-content-between align-items-center">
                <!-- Like Button -->
                <div>
                    <form id="like-form" method="POST" action="{% url 'like_blog' blog.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary btn-lg px-4">
                            ‚ù§Ô∏è Like (<span id="like-count">{{ blog.like_count }}</span>)
                        </button>
                    </form>
                </div>
                
                <!-- Share Button -->
                <div>
                    <button id="share-button" class="btn btn-success btn-lg px-4" onclick="copyToClipboard('{{ request.build_absolute_uri }}')">
                        üì§ Share
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast align-items-center text-bg-success border-0 p-3 shadow-lg" 
    style="position: fixed; bottom: 1rem; right: 1rem; z-index: 1050; display: none;">
    <div class="d-flex">
        <div class="toast-body fs-6">
            Blog link copied to clipboard!
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="Close" onclick="closeToast()"></button>
    </div>
</div>

<script>
    // Copy blog link to clipboard
    function copyToClipboard(link) {
        navigator.clipboard.writeText(link).then(() => {
            // Show toast notification
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }).catch((error) => {
            console.error('Error copying link: ', error);
        });
    }

    // Close toast notification
    function closeToast() {
        const toast = document.getElementById('toast');
        toast.style.display = 'none';
    }
</script>

<style>
    body {
        font-family: 'Roboto', sans-serif;
        background-color: #f9f9f9;
    }

    .card-title {
        font-family: 'Merriweather', serif;
        color: #333;
    }

    .card-text {
        color: #555;
    }

    .btn-primary {
        background-color: #007bff;
        border: none;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    .btn-success {
        background-color: #28a745;
        border: none;
    }

    .btn-success:hover {
        background-color: #218838;
    }

    .toast-body {
        font-family: 'Roboto', sans-serif;
    }
</style>
{% endblock %}
